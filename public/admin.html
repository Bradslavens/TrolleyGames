<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trolley Games - Signal Admin</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <div class="admin-container">
        <header>
            <h1>ðŸšŠ Trolley Games Signal Admin</h1>
            <div class="header-actions">
                <button id="exportBtn" class="btn btn-secondary">Export Signals</button>
                <button id="importBtn" class="btn btn-secondary">Import from JSON</button>
            </div>
        </header>

        <div class="controls">
            <div class="filters">
                <select id="lineFilter">
                    <option value="">All Lines</option>
                    <option value="Blue Line North East">Blue Line North East</option>
                    <option value="Blue Line North West">Blue Line North West</option>
                    <option value="Blue Line South East">Blue Line South East</option>
                    <option value="Blue Line South West">Blue Line South West</option>
                    <option value="Orange Line East">Orange Line East</option>
                    <option value="Orange Line West">Orange Line West</option>
                    <option value="Green Line East">Green Line East</option>
                    <option value="Green Line West">Green Line West</option>
                    <option value="A Yard">A Yard</option>
                    <option value="C Yard">C Yard</option>
                    <option value="Downtown">Downtown</option>
                </select>
                <input type="text" id="pageFilter" placeholder="Filter by page">
                <button id="filterBtn" class="btn btn-primary">Filter</button>
                <button id="clearFiltersBtn" class="btn btn-secondary">Clear</button>
            </div>
            <button id="addSignalBtn" class="btn btn-success">+ Add New Signal</button>
        </div>

        <div class="stats">
            <div class="stat-card">
                <span class="stat-label">Total Signals:</span>
                <span id="totalCount" class="stat-value">0</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Correct Signals:</span>
                <span id="correctCount" class="stat-value">0</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Incorrect Signals:</span>
                <span id="incorrectCount" class="stat-value">0</span>
            </div>
        </div>

        <div class="table-container">
            <table id="signalsTable">
                <thead>
                    <tr>
                        <th class="sortable" data-field="id">
                            ID <span class="sort-indicator"></span>
                        </th>
                        <th class="sortable" data-field="prefix">
                            Prefix <span class="sort-indicator"></span>
                        </th>
                        <th class="sortable" data-field="number">
                            Number <span class="sort-indicator"></span>
                        </th>
                        <th class="sortable" data-field="suffix">
                            Suffix <span class="sort-indicator"></span>
                        </th>
                        <th class="sortable" data-field="correct">
                            Correct <span class="sort-indicator"></span>
                        </th>
                        <th class="sortable" data-field="hitbox_width">
                            Hitbox <span class="sort-indicator"></span>
                        </th>
                        <th class="sortable" data-field="line">
                            Line <span class="sort-indicator"></span>
                        </th>
                        <th class="sortable" data-field="page">
                            Page <span class="sort-indicator"></span>
                        </th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="signalsTableBody">
                    <!-- Signals will be loaded here -->
                </tbody>
            </table>
        </div>

        <div class="pagination">
            <button id="prevPage" class="btn btn-secondary">Previous</button>
            <span id="pageInfo">Page 1 of 1</span>
            <button id="nextPage" class="btn btn-secondary">Next</button>
        </div>
    </div>

    <!-- Modal for Add/Edit Signal -->
    <div id="signalModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Signal</h2>
                <span class="close">&times;</span>
            </div>
            <form id="signalForm">
                <input type="hidden" id="signalId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="prefix">Prefix:</label>
                        <input type="text" id="prefix" name="prefix" placeholder="e.g., ST, RT">
                    </div>
                    <div class="form-group">
                        <label for="number">Number: *</label>
                        <input type="text" id="number" name="number" required placeholder="e.g., 123, 456">
                    </div>
                    <div class="form-group">
                        <label for="suffix">Suffix:</label>
                        <input type="text" id="suffix" name="suffix" placeholder="e.g., A, B">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="correct">
                            <input type="checkbox" id="correct" name="correct">
                            This is a correct signal
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="line">Line: *</label>
                        <select id="line" name="line" required>
                            <option value="">Select Line</option>
                            <option value="Blue Line North East">Blue Line North East</option>
                            <option value="Blue Line North West">Blue Line North West</option>
                            <option value="Blue Line South East">Blue Line South East</option>
                            <option value="Blue Line South West">Blue Line South West</option>
                            <option value="Orange Line East">Orange Line East</option>
                            <option value="Orange Line West">Orange Line West</option>
                            <option value="Green Line East">Green Line East</option>
                            <option value="Green Line West">Green Line West</option>
                            <option value="A Yard">A Yard</option>
                            <option value="C Yard">C Yard</option>
                            <option value="Downtown">Downtown</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="page">Page:</label>
                        <input type="text" id="page" name="page" placeholder="e.g., 1, 2, A, B">
                    </div>
                </div>

                <div class="form-section">
                    <h3>Hitbox Dimensions</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="hitbox_x">X Position:</label>
                            <input type="number" id="hitbox_x" name="hitbox_x" value="0">
                        </div>
                        <div class="form-group">
                            <label for="hitbox_y">Y Position:</label>
                            <input type="number" id="hitbox_y" name="hitbox_y" value="0">
                        </div>
                        <div class="form-group">
                            <label for="hitbox_width">Width:</label>
                            <input type="number" id="hitbox_width" name="hitbox_width" value="0">
                        </div>
                        <div class="form-group">
                            <label for="hitbox_height">Height:</label>
                            <input type="number" id="hitbox_height" name="hitbox_height" value="0">
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Signal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Import Signals from JSON</h2>
                <span class="close">&times;</span>
            </div>
            <div class="import-section">
                <p>Paste your JSON data below (in the format of your correctSignals.js file):</p>
                <textarea id="importData" placeholder='{"Blue Line North East": ["2", "046", "089"], ...}'></textarea>
                <div class="import-options">
                    <label>
                        <input type="checkbox" id="markAsCorrect" checked>
                        Mark all imported signals as correct
                    </label>
                    <label>
                        <input type="checkbox" id="clearExisting">
                        Clear existing signals before import
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelImportBtn">Cancel</button>
                    <button type="button" class="btn btn-primary" id="executeImportBtn">Import</button>
                </div>
            </div>
        </div>
    </div>

    <script src="admin-script.js"></script>
</body>
</html>
